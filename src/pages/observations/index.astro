---
import { getCollection } from 'astro:content';
import ContentLayout from '../../layouts/ContentLayout.astro';
import ObservationCard from '../../components/ObservationCard.astro';

// Get all observations
const observations = await getCollection('observations');
const sortedObservations = observations.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<ContentLayout 
  title="Member Observations"
  description="A complete archive of botanical discoveries, experiments, and mystical insights from our esteemed society members. Explore propagation techniques, terrarium studies, and field research from Durban's botanical guardians."
>
  <main class="main-content">
    <div class="container">
      <!-- Header -->
      <header class="page-header mb-lg">
        <div class="flex items-center gap-md mb-md">
          <img src={`${import.meta.env.BASE_URL}images/navigation/icons/icon_diaries.png`} alt="Member Observations" class="w-12 h-12" />
          <div>
            <h1 class="text-4xl font-bold text-moss mb-sm">Member Observations</h1>
            <p class="text-lg text-sepia italic">Sacred botanical discoveries from our brotherhood of plant guardians</p>
          </div>
        </div>
        
        <!-- Navigation -->
        <nav class="breadcrumb">
          <div class="flex items-center gap-sm text-sm text-sepia">
            <a href={`${import.meta.env.BASE_URL}`} class="hover:text-moss transition-colors">Home</a>
            <span>→</span>
            <span class="text-moss font-medium">Member Observations</span>
          </div>
        </nav>
      </header>

      <!-- Observations Grid -->
      {sortedObservations.length > 0 ? (
        <div class="observations-grid space-y-lg">
          {sortedObservations.map((observation) => (
            <ObservationCard observation={observation} size="full" />
          ))}
        </div>
      ) : (
        <div class="empty-state text-center py-xl">
          <div class="text-6xl text-sepia opacity-50 mb-md">🌿</div>
          <h2 class="text-2xl text-moss mb-sm">No Observations Yet</h2>
          <p class="text-sepia italic">The sacred journals await the first entries from our botanical brotherhood...</p>
        </div>
      )}

      <!-- Return Navigation -->
      <nav class="return-nav mt-xl pt-lg border-t border-decorative">
        <div class="flex justify-center">
          <a 
            href="/"
            class="inline-flex items-center text-moss hover:text-forest-shadow transition-colors font-medium"
          >
            ← Return to Garden Portal
          </a>
        </div>
      </nav>
    </div>
  </main>
</ContentLayout>

